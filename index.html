<!DOCTYPE html>
<div id="Fullpage">
<head>
    <title>Electron Sockets App</title>
    <link rel="icon" type="image/x-icon" href="http://localhost:3000/favicon.ico">
    <script src="/socket.io/socket.io.js"></script> <!-- Load the Socket io here. Despite not being the actual location of the file Express intercepts this requests and serves the correct file -->
    <style>
        #Fullpage {
            padding-top: 20%;            
            padding-bottom: 29%;            
            background-color: rgb(142, 174, 233);
            text-align: center; /* Everything inside the element with id Fullpage will be centered*/
            font-family: Arial, Helvetica, sans-serif; 
            font-style: normal;
            border-radius: 5%;
        }

        #btnreplace {
            font-family: 'Franklin Gothic Medium';
            padding: 1%;
            border-width: 0;
            border-radius: 10%;
        }
    </style>
</head>
<body>
    <h1>Rocker Switch</h1>
    <p id="testpara">This Paragraph will be replaced by secret information only accessible from the server.</p>
    <p>http://localhost:3000<p>

    <button class="button" id="btn1" onclick="fliptheswitch('btn1', 'btn2')">Button 1</button>
    <button class="button" id="btn2" onclick="fliptheswitch('btn2', 'btn1')">Button 2</button>
    <script>
       var socket = io(); // This makes it so the client triggers the automatic connect and disconnect emits

        function fliptheswitch(self, other) {

            socket.emit('buttonpress', self, other);
            console.log("Click Emitted");
            
        }

        socket.on('btnresponse', (lock, unlock) => {

            //console.log(lock);
            //console.log(unlock);

            let pressed = document.getElementById(lock);
            let unpressed = document.getElementById(unlock);


            pressed.setAttribute('disabled', 'disabled');
            unpressed.removeAttribute('disabled');

            console.log('Rocked The Buttons')
        });

        socket.on('lockall', () => {
            let btnself  = document.getElementsByClassName('button');
            for (let index = 0; index < btnself.length; index++) {
                btnself[index].setAttribute('disabled', 'disabled');
            }
            console.log('This should never trigger')
        });

    </script>
</body>
</div>